<!-- 
1.调用compile开启编译
2.创建Compilation对象
  1)负责整个编译过程
  2)内部保留对compiler对象引用-this.compiler
  3)this.entries 入口
  4)this.modules 所有模块
  5)this.chunks 代码块
  6)this.assets 所有资源
  7)template 不同的时候的代码不一样用的不一样的模板
    1>this.mainTemplate 主模板
    2>this.chunkTemplate 懒加载模板
    3>this.hotUpdateChunkTemplate 热更新模板
    4>this.runtimeTemplate
    5>this.moduleTemplates

run(callback)里面：
  const onCompiled = (err, compilation) => { //先声明，编译时候调这方法
			if (err) return finalCallback(err);

			if (this.hooks.shouldEmit.call(compilation) === false) {
				const stats = new Stats(compilation);
				stats.startTime = startTime;
				stats.endTime = Date.now();
				this.hooks.done.callAsync(stats, err => {
					if (err) return finalCallback(err);
					return finalCallback(null, stats);
				});
				return;
			}

			this.emitAssets(compilation, err => {
				if (err) return finalCallback(err);

				if (compilation.hooks.needAdditionalPass.call()) {
					compilation.needAdditionalPass = true;

					const stats = new Stats(compilation);
					stats.startTime = startTime;
					stats.endTime = Date.now();
					this.hooks.done.callAsync(stats, err => {
						if (err) return finalCallback(err);

						this.hooks.additionalPass.callAsync(err => {
							if (err) return finalCallback(err);
							this.compile(onCompiled);
						});
					});
					return;
				}

				this.emitRecords(err => {
					if (err) return finalCallback(err);

					const stats = new Stats(compilation);
					stats.startTime = startTime;
					stats.endTime = Date.now();
					this.hooks.done.callAsync(stats, err => {
						if (err) return finalCallback(err);
						return finalCallback(null, stats);
					});
				});
			});
		};
  this.hooks.beforeRun.callAsync(this, err => { //先走beforeRun
			if (err) return finalCallback(err);
			this.hooks.run.callAsync(this, err => { //再走run
				if (err) return finalCallback(err);
				this.readRecords(err => {
					if (err) return finalCallback(err);
					this.compile(onCompiled); //开始编译
				});
			});
		});
 -->