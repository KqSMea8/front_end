<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/reset.css" type="text/css" />
    <link rel="stylesheet" href="css/index.css" type="text/css" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="js/art-template.js"></script>
    <title>Document</title>
</head>
<script id="test" type="text/html">

    <div class="select_box show">
        <div class="select_mask"></div>
        <div class="select_content">
            <div class="select_normal border_bottom click_item">不限行业</div>
            <div class="select_left_column scroll_y">
                {{each _industryList as item i}}
                <div class="select_item click_item" data-code="{{item.num}}" data-name="{{item.classify}}">{{item.classify}}</div>
                {{/each}}
            </div>
            <div class="select_right_column scroll_y">

            </div>
        </div>
    </div>

</script>
<script id="select_right" type="text/html">

    <div class="select_item click_item child_item">全部分类</div>
    {{each _industryChild as cItem i}}
    <div class="select_item click_item child_item" data-code="{{cItem.num}}" data-name="{{cItem.classify}}">{{cItem.classify}}</div>
    {{/each}}

</script>
<body>
    <div class="select_btn">点击切换</div>
</body>
<script>
    var industryList = {
        "1": "金融业",
        "2": "IT|通信|互联网",
        "3": "机械机电|自动化",
        "4": "专业服务",
        "5": "冶金冶炼|五金|采掘",
        "6": "化工行业",
        "7": "纺织服装|皮革鞋帽",
        "8": "电子电器|仪器仪表",
        "9": "快消品|办公用品",
        "10": "房产|建筑|城建|环保",
        "11": "制药|医疗",
        "12": "生活服务|娱乐休闲",
        "13": "交通工具|运输物流",
        "14": "批发|零售|贸易",
        "15": "广告|媒体",
        "16": "教育|科研|培训",
        "17": "造纸|印刷",
        "18": "包装|工艺礼品|奢侈品",
        "19": "能源|资源",
        "20": "农|林|牧|渔",
        "21": "政府|非赢利机构|其他",
        "101": "基金\/证券\/期货\/投资",
        "102": "银行",
        "103": "保险",
        "104": "信托\/担保\/拍卖\/典当",
        "105": "金融租赁",
        "199": "其他",
        "201": "互联网\/电子商务",
        "202": "计算机服务(系统\/数据\/维护)",
        "203": "计算机软件",
        "204": "计算机硬件",
        "205": "网络游戏",
        "206": "通信\/电信\/网络设备",
        "207": "通信\/电信运营、增值服务",
        "208": "电子技术\/半导体\/集成电路",
        "299": "其他",
        "301": "机床及附件",
        "302": "行业机械设备",
        "303": "专用机械设备",
        "304": "动力电力机电设备",
        "305": "工业自动化",
        "399": "其他",
        "401": "会展及活动服务",
        "402": "财务\/审计\/税务",
        "403": "管理咨询",
        "404": "人力资源",
        "405": "法律服务",
        "406": "技术服务",
        "407": "检测认证",
        "408": "租赁服务",
        "409": "中介服务",
        "410": "外包服务",
        "411": "翻译服务",
        "499": "其他",
        "501": "冶金冶炼业",
        "502": "五金工具",
        "503": "不锈钢\/铝合金\/金属制品",
        "504": "采掘业",
        "599": "其他",
        "601": "石油化工",
        "602": "化工原料及产品",
        "603": "涂料\/油墨\/颜料\/染料",
        "604": "橡胶塑料及制品",
        "605": "玻璃\/陶瓷",
        "699": "其他",
        "701": "纺织及成品",
        "702": "印染、染整",
        "703": "服装",
        "704": "皮革、羊毛、羽绒制品",
        "705": "鞋帽",
        "799": "其他",
        "801": "电气设备",
        "802": "电子器件",
        "803": "电工器材",
        "804": "照明工业",
        "805": "数码家电",
        "806": "仪器仪表",
        "899": "其他",
        "901": "快速消费品",
        "902": "办公用品及设备",
        "999": "其他",
        "1001": "房地产",
        "1002": "建筑工程",
        "1003": "建材装修",
        "1004": "城市建设",
        "1005": "环境保护",
        "1099": "其他",
        "1101": "制药\/生物工程",
        "1102": "医疗\/护理\/卫生",
        "1103": "医疗设备\/器械",
        "1199": "其他",
        "1201": "餐饮业",
        "1202": "酒店\/旅游",
        "1203": "美容\/保健",
        "1204": "娱乐\/休闲\/体育",
        "1299": "其他",
        "1301": "汽车及零配件",
        "1302": "船舶及零配件",
        "1303": "航空铁路及轨道交通",
        "1304": "摩托及非机动车",
        "1305": "交通运输",
        "1306": "城市公共交通",
        "1307": "物流（邮政）、仓储",
        "1399": "其他",
        "1401": "批发",
        "1402": "零售",
        "1403": "贸易\/进出口",
        "1499": "其他",
        "1501": "广告",
        "1502": "公关\/市场营销",
        "1503": "广播\/电视媒体",
        "1504": "网络新媒体",
        "1505": "影视艺术\/文化传播",
        "1506": "文字媒体\/出版",
        "1599": "其他",
        "1601": "教育\/院校",
        "1602": "学术\/科研",
        "1603": "培训",
        "1699": "其他",
        "1701": "造纸\/纸张\/纸品",
        "1702": "印刷\/制版",
        "1799": "其他",
        "1801": "包装",
        "1802": "钟表眼镜",
        "1803": "工艺品",
        "1804": "礼品",
        "1805": "奢侈品、收藏品",
        "1899": "其他",
        "1901": "常规能源（煤、石油、天然气等）",
        "1902": "新能源（风能、太阳能、地热能等）",
        "1903": "电力、热力、水利",
        "1904": "电池（生产）蓄电池",
        "1999": "其他",
        "2001": "农产品种植、采集",
        "2002": "林木产品种植、采集",
        "2003": "水产品养殖、捕捞",
        "2004": "农林牧渔相关服务业(农产品加工、兽医、灌溉等)",
        "2005": "牲畜、家禽饲养",
        "2099": "其他",
        "2101": "政府\/公共事业",
        "2102": "非盈利机构",
        "2199": "其他",
    };
    var _industryList = [];
    var sName = '' ;
    var num = '1' ;
    var _industryChild = [
        {num: 101, classify: "基金/证券/期货/投资"},
        {num: 102, classify: "银行"},
        {num: 103, classify: "保险"},
        {num: 104, classify: "信托/担保/拍卖/典当"},
        {num: 105, classify: "金融租赁"},
        {num: 199, classify: "其他"}
    ];

    for (let item in industryList){
        let single = {} ;
        if (parseInt(item) < 100) {
            single.num = parseInt(item) ;
            single.child = [] ;
            single.classify = industryList[item] ;
            _industryList.push(single) ;
        }
    }
    for(let i=0 ; i<_industryList.length;i++){
        let start = _industryList[i].num*100 ;
        let end = (_industryList[i].num+1)*100 ;
        for(let item in industryList){
            let single = {} ;
            if(start < parseInt(item)&& parseInt(item)< end){
                single.num = parseInt(item) ;
                single.classify = industryList[item] ;
                _industryList[i].child.push(single) ;
            }
        }
    }
    var html = template('test', {_industryList} );
    document.body.innerHTML += html;

    var $selectBox =  $('.select_box') ;

    $($('.select_left_column div:nth-of-type(1)')[0]).addClass('selected') ;
    $('.select_right_column').html(template('select_right', {_industryChild})) ;

    $('.select_btn').click(function () {
        $selectBox.css('display','block') ;
        $selectBox.height() ;
        $selectBox.addClass('show') ;
    });
    $('.select_mask').click(function () {
        $selectBox.removeClass('show') ;
        setTimeout(()=>{
            $selectBox.css('display','none') ;
        },400)
    });
    let old_l_selected = $('.select_left_column div:nth-of-type(1)')[0] ;
    let old_r_selected = null ;

    $('.select_content').click(function (e) {
        if(e.target.dataset.code){
            num = e.target.dataset.code ;
            sName = e.target.dataset.name ;
        }else{
            $selectBox.removeClass('show') ;
            setTimeout(()=>{
                $selectBox.css('display','none') ;
            },400);
            return
        }
        let industry = _industryList.find(item=>item.num == num) ;
        if(industry){
            _industryChild = industry.child ;
            $(old_l_selected).removeClass('selected') ;
            old_l_selected = e.target ;
            $(e.target).addClass('selected') ;
            let sr_html = template('select_right', {_industryChild} ) ;
            $('.select_right_column').html(sr_html) ;
        }else{
            if(old_r_selected){
                $(old_r_selected).removeClass('checked') ;
            }
            old_r_selected = e.target ;
            $(e.target).addClass('checked') ;
            $selectBox.removeClass('show') ;
            setTimeout(()=>{
                $selectBox.css('display','none') ;
            },400)
            $('.select_btn').text(sName) ;
        }

    })



</script>
</html>