<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>    
</body>
<script>
let arr = [1,2,3,4] ;

/*
第二个参数是初始值
*/
// 求和
let sum = arr.reduce((val,item,index,origin)=>{
    return val + item ;//返回值会成为下一次函数执行的时候的val
},5) //val的初始值，默认是第一个item
console.log(sum)

// 求平均值
let average = arr.reduce((val,item,index,origin)=>{ //index是每次的索引，origin是原数组
    let sum = val + item ;
    if(index == origin.length-1){
        return Math.round(sum/origin.length) ;
    }else{
        return sum
    }
})
console.log(average)

// reduce是从左往右算，reduceRight是从右往左算

//reduce的实现
Array.prototype.reduce2 = function(reducer,initialVal=this[0]){
    for(let i=0 ;i<this.length ;i++){
        initialVal = reducer(initialVal,this[i],index=i,origin=this)
    }
    return initialVal
}

let sum2 = arr.reduce2((val,item,index,origin)=>{
    return val + item ;//返回值会成为下一次函数执行的时候的val
},5) //val的初始值，默认是第一个item
console.log(sum2)
let average2 = arr.reduce2((val,item,index,origin)=>{ //index是每次的索引，origin是原数组
    let sum = val + item ;
    if(index == origin.length-1){
        return Math.round(sum/origin.length) ;
    }else{
        return sum
    }
})
console.log(average2)

</script>
</html>